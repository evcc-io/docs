template: volvo-connected
product:
  identifier: volvo
  brand: Volvo
requirements: ["skiptest"]
description: |
  To use with evcc, you need a Volvo account and a Volvo Connected Car API Key.
  1. To do this, create a new application on the [Account page](https://developer.volvocars.com/account/) and save the primary VCC API key.
  2. Now publish your application and select the **Scope** permissions **Connected Vehicle API:** `conve:vehicle-relation, conve:odometer-status`, **Energy API:** `energy:state:read`.
  3. You must enter the URL of your evcc instance as the redirect URL, e.g. `https://evcc.example.org/providerauth/callback`.
  4. When adding the vehicle via the UI, an error message is displayed.
  5. Open a new tab and go to the evcc configuration page. A button for logging in will appear in the top right menu.
  6. Log in with your Volvo account and allow access to the data. If the authorization is successful, the vehicle can be added.

  **NOTE:** Volvo enforces re-login every 7 days. Use "hamburger" menu logout/login.

render:
  - default: |
      type: template
      template: volvo-connected
      vccapikey: # VCC API Key, from [Volvo Developer App](https://developer.volvocars.com/).
      clientId: # Client ID, from [Volvo Developer App](https://developer.volvocars.com/).
      clientSecret: # Client Secret, from [Volvo Developer App](https://developer.volvocars.com/).
      redirectUri: https://evcc.example.org/providerauth/callback # Redirect URI, Redirect URI of your evcc instance. Must match the redirect URI set in your Volvo Developer App.
      vin: WF0FXX... # Vehicle Identification Number, If you own multiple vehicles from the same manufacturer
      title: # Title, Will be displayed in the user interface (optional)
      capacity: 50 # Battery capacity (kWh), optional
    advanced: |
      type: template
      template: volvo-connected
      vccapikey: # VCC API Key, from [Volvo Developer App](https://developer.volvocars.com/).
      clientId: # Client ID, from [Volvo Developer App](https://developer.volvocars.com/).
      clientSecret: # Client Secret, from [Volvo Developer App](https://developer.volvocars.com/).
      redirectUri: https://evcc.example.org/providerauth/callback # Redirect URI, Redirect URI of your evcc instance. Must match the redirect URI set in your Volvo Developer App.
      vin: WF0FXX... # Vehicle Identification Number, If you own multiple vehicles from the same manufacturer
      title: # Title, Will be displayed in the user interface (optional)
      capacity: 50 # Battery capacity (kWh), optional
      icon: car # Icon, Will be displayed in the user interface [car, bike, bus, moped, motorcycle, rocket, scooter, taxi, tractor, rickshaw, shuttle, van, airpurifier, battery, bulb, climate, coffeemaker, compute, cooking, cooler, desktop, device, dishwasher, dryer, floorlamp, generic, heater, heatexchange, heatpump, kettle, laundry, laundry2, machine, meter, microwave, pump, smartconsumer, tool, waterheater] (optional)
      phases: 3 # Maximum number of phases, The maximum number of phases which can be used (optional)
      mode: # Default charging mode, Used when a vehicle is connected. Possible values are Off, Now, MinPV and PV, or empty if none should be set (optional)
      minCurrent: 6 # Minimum amperage (A), The minimum amperage per connected phase that can be used (optional)
      maxCurrent: 16 # Maximum amperage (A), The maximum amperage per connected phase that can be used (optional)
      maxPower: # Maximum charging power hint (W), Defines the maximum charging power of the vehicle. Helps improve charge plan accuracy when the vehicle typically uses less than the offered current or supports higher single-phase current compared to three-phase. _The offered current of the loadpoint is not affected._ (optional)
      identifiers: # Identification, Mostly this can be added later, see: https://docs.evcc.io/en/docs/features/vehicle (optional)
      priority: # Priority, Priority of the loadpoint or vehicle in relation to other loadpoints or vehicles for allocating pv energy (optional)
params:
  - name: vccapikey
    example:
    default:
    choice: []
    unit:
    description: VCC API Key
    help: from [Volvo Developer App](https://developer.volvocars.com/).
    advanced: false
    optional: false
  - name: clientId
    example:
    default:
    choice: []
    unit:
    description: Client ID
    help: from [Volvo Developer App](https://developer.volvocars.com/).
    advanced: false
    optional: false
  - name: clientSecret
    example:
    default:
    choice: []
    unit:
    description: Client Secret
    help: from [Volvo Developer App](https://developer.volvocars.com/).
    advanced: false
    optional: false
  - name: redirectUri
    example: https://evcc.example.org/providerauth/callback
    default:
    choice: []
    unit:
    description: Redirect URI
    help: Redirect URI of your evcc instance. Must match the redirect URI set in your Volvo Developer App.
    advanced: false
    optional: false
  - name: vin
    example: WF0FXX...
    default:
    choice: []
    unit:
    description: Vehicle Identification Number
    help: If you own multiple vehicles from the same manufacturer
    advanced: false
    optional: false
  - name: title
    example:
    default:
    choice: []
    unit:
    description: Title
    help: Will be displayed in the user interface
    advanced: false
    optional: true
  - name: capacity
    example: 50
    default:
    choice: []
    unit: kWh
    description: Battery capacity
    help:
    advanced: false
    optional: true
  - name: icon
    example:
    default: car
    choice: ['car', 'bike', 'bus', 'moped', 'motorcycle', 'rocket', 'scooter', 'taxi', 'tractor', 'rickshaw', 'shuttle', 'van', 'airpurifier', 'battery', 'bulb', 'climate', 'coffeemaker', 'compute', 'cooking', 'cooler', 'desktop', 'device', 'dishwasher', 'dryer', 'floorlamp', 'generic', 'heater', 'heatexchange', 'heatpump', 'kettle', 'laundry', 'laundry2', 'machine', 'meter', 'microwave', 'pump', 'smartconsumer', 'tool', 'waterheater']
    unit:
    description: Icon
    help: Will be displayed in the user interface
    advanced: true
    optional: true
  - name: phases
    example: 3
    default:
    choice: []
    unit:
    description: Maximum number of phases
    help: The maximum number of phases which can be used
    advanced: true
    optional: true
  - name: mode
    example:
    default:
    choice: []
    unit:
    description: Default charging mode
    help: Used when a vehicle is connected. Possible values are Off, Now, MinPV and PV, or empty if none should be set
    advanced: true
    optional: true
  - name: minCurrent
    example: 6
    default:
    choice: []
    unit: A
    description: Minimum amperage
    help: The minimum amperage per connected phase that can be used
    advanced: true
    optional: true
  - name: maxCurrent
    example: 16
    default:
    choice: []
    unit: A
    description: Maximum amperage
    help: The maximum amperage per connected phase that can be used
    advanced: true
    optional: true
  - name: maxPower
    example:
    default:
    choice: []
    unit: W
    description: Maximum charging power hint
    help: Defines the maximum charging power of the vehicle. Helps improve charge plan accuracy when the vehicle typically uses less than the offered current or supports higher single-phase current compared to three-phase. _The offered current of the loadpoint is not affected._
    advanced: true
    optional: true
  - name: identifiers
    example:
    default:
    choice: []
    unit:
    description: Identification
    help: 'Mostly this can be added later, see: https://docs.evcc.io/en/docs/features/vehicle'
    advanced: true
    optional: true
  - name: priority
    example:
    default:
    choice: []
    unit:
    description: Priority
    help: Priority of the loadpoint or vehicle in relation to other loadpoints or vehicles for allocating pv energy
    advanced: true
    optional: true