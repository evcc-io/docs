template: lg-therma
product:
  identifier: lg-therma-v-r290-monobloc-sg-ready
  brand: LG
  description: Therma V R290 Monobloc (SG Ready)
  group: Wärmeerzeuger
description: |
  Modbus Verbindung zur LG Therma V Wärmepumpe.
  Funktioniert über SG Ready Energiezustände für intelligente Steuerung.
  Inneneinheit/Fernbedienung in den erweiterten Einstellungen > "Konnektivität" > "Energiezustand" > "Signaltyp" > auf "Modbus" einstellen.
  Da die interne Energiemessung zu hohe Werte anzeigt ist eine externe Energiemessung empfohlen.
  Werkseinstellung Modbus Addresse(HEX) = 21 (33).
  Modbus Register sind im Installationshandbuch zu finden (Adresse jeweils ohne die führende Ziffer und -1).
  Informationen zu den Energiezuständen finden sich auch im Installationshandbuch.
  Die Energiezustände 6 und 7 können an der Inneneinheit in den erweiterten Einstellungen > "Konnektivität" > "Energiezustand" > "Definition der Energiezustände" angepasst werden.
  Wenn die interne Energiemessung nicht funktioniert (nicht jedes Model unterstützt das Register), dann setze die Energiemessung auf "Nein".

render:
  - default: |
      type: template
      template: lg-therma

      # RS485 via adapter (Modbus RTU)
      modbus: rs485serial
      id: 33
      device: /dev/ttyUSB0 # USB-RS485 Adapter Adresse
      baudrate: 9600 # Prüfe die Geräteeinstellungen, typische Werte sind 9600, 19200, 38400, 57600, 115200
      comset: "8N1" # Kommunikationsparameter für den Adapter

      # RS485 via TCP/IP (Modbus RTU)
      modbus: rs485tcpip
      id: 33
      host:  # Hostname
      port: 502 # Port
      tempsource: water_tank # DHW Warmwassertank- oder Wassereinlasstemperatur, [water_tank, water_inlet]
      energystate: SGReady # SGReady oder anpassbare Energiezustände 6 und 7, [SGReady, IndividualEnergystate]
      haspower: true # Interne Energiemessung
params:
  - name: modbus
    example:
    default:
    choice: ['rs485']
    unit:
    description: Modbus Typ
    help:
    advanced: false
    optional: false
  - name: tempsource
    example:
    default: water_tank
    choice: ['water_tank', 'water_inlet']
    unit:
    description: DHW Warmwassertank- oder Wassereinlasstemperatur
    help:
    advanced: false
    optional: false
  - name: energystate
    example:
    default: SGReady
    choice: ['SGReady', 'IndividualEnergystate']
    unit:
    description: SGReady oder anpassbare Energiezustände 6 und 7
    help:
    advanced: false
    optional: false
  - name: haspower
    example:
    default: true
    choice: []
    unit:
    description: Interne Energiemessung
    help:
    advanced: false
    optional: false
modbus:
  baudrate: 9600
  comset: 8N1
  device: /dev/ttyUSB0
  host:
  id: 33
  port: 502
  rs485serial: true
  rs485tcpip: true