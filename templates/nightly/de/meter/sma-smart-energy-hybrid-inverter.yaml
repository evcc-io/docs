template: sma-hybrid
product:
  identifier: sma-smart-energy-hybrid-inverter
  brand: SMA
  description: Smart Energy Hybrid-Wechselrichter
capabilities: ["battery-control"]
description: |
  Bei der Nutzung der aktiven Speichersteuerung durch evcc darf die Funktion 'Prognosebasierten Laden' im SMA Portal nicht aktiv sein. Ansonsten kann es zu Konflikten bei der Steuerung des Speichers kommen.
render:
  - usage: pv
    default: |
      type: template
      template: sma-hybrid
      usage: pv

      # Modbus TCP
      modbus: tcpip
      id: 3
      host:  # Hostname
      port: 502 # Port
    advanced: |
      type: template
      template: sma-hybrid
      usage: pv

      # Modbus TCP
      modbus: tcpip
      id: 3
      host:  # Hostname
      port: 502 # Port
      maxacpower: 0 # Maximale AC Leistung des Hybrid-Wechselrichters (W), optional
  - usage: battery
    default: |
      type: template
      template: sma-hybrid
      usage: battery

      # Modbus TCP
      modbus: tcpip
      id: 3
      host:  # Hostname
      port: 502 # Port
      capacity: 50 # Akkukapazität (kWh), optional
      minsoc: 25 # Minimaler Ladestand (%), Untere Grenze beim Entladen der Batterie im normalen Betrieb (optional)
      maxsoc: 95 # Maximaler Ladestand (%), Oberes Limit beim Laden der Batterie aus dem Netz (optional)
    advanced: |
      type: template
      template: sma-hybrid
      usage: battery

      # Modbus TCP
      modbus: tcpip
      id: 3
      host:  # Hostname
      port: 502 # Port
      capacity: 50 # Akkukapazität (kWh), optional
      minsoc: 25 # Minimaler Ladestand (%), Untere Grenze beim Entladen der Batterie im normalen Betrieb (optional)
      maxsoc: 95 # Maximaler Ladestand (%), Oberes Limit beim Laden der Batterie aus dem Netz (optional)
      maxchargepower: 4200 # Maximale Ladeleistung (W), Für erzwungenes Laden des Speichers. (optional)
      maxdischargepower: # Maximale Entladeleistung (W), Maximale Entladeleistung des Speichers. (optional)
      watchdog: 60s # Watchdog, optional
  - usage: grid
    default: |
      type: template
      template: sma-hybrid
      usage: grid

      # Modbus TCP
      modbus: tcpip
      id: 3
      host:  # Hostname
      port: 502 # Port
    advanced: |
      type: template
      template: sma-hybrid
      usage: grid

      # Modbus TCP
      modbus: tcpip
      id: 3
      host:  # Hostname
      port: 502 # Port
params:
  - name: modbus
    example:
    default:
    choice: ['tcpip']
    unit:
    description: Modbus Typ
    help: Der ModbusTCP Server muss aktiviert sein.
    advanced: false
    optional: false
  - name: capacity
    example: 50
    default:
    choice: []
    unit: kWh
    description: Akkukapazität
    help:
    advanced: false
    optional: true
  - name: minsoc
    example: 25
    default:
    choice: []
    unit: '%'
    description: Minimaler Ladestand
    help: Untere Grenze beim Entladen der Batterie im normalen Betrieb
    advanced: false
    optional: true
  - name: maxsoc
    example: 95
    default:
    choice: []
    unit: '%'
    description: Maximaler Ladestand
    help: Oberes Limit beim Laden der Batterie aus dem Netz
    advanced: false
    optional: true
  - name: maxacpower
    example: 5000
    default: 0
    choice: []
    unit: W
    description: Maximale AC Leistung des Hybrid-Wechselrichters
    help:
    advanced: true
    optional: true
  - name: maxchargepower
    example:
    default: 4200
    choice: []
    unit: W
    description: Maximale Ladeleistung
    help: Für erzwungenes Laden des Speichers.
    advanced: true
    optional: true
  - name: maxdischargepower
    example:
    default:
    choice: []
    unit: W
    description: Maximale Entladeleistung
    help: Maximale Entladeleistung des Speichers.
    advanced: true
    optional: true
  - name: watchdog
    example:
    default: 60s
    choice: []
    unit:
    description: Watchdog
    help:
    advanced: true
    optional: true
modbus:
  host:
  id: 3
  modbus: tcpip
  port: 502
  tcpip: true