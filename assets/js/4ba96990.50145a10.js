"use strict";(self.webpackChunkevcc_docs=self.webpackChunkevcc_docs||[]).push([[923],{7921:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>o});var r=i(5893),s=i(1151);const d={sidebar_position:7},t="hems",c={id:"reference/configuration/hems",title:"hems",description:"evcc kann in bestehende Home Energy Management Systeme (HEMS) integriert werden. Momentan wird der SMA Sunny Home Manager 2.0 (SHM) unterst\xfctzt!",source:"@site/docs/reference/configuration/hems.md",sourceDirName:"reference/configuration",slug:"/reference/configuration/hems",permalink:"/docs/reference/configuration/hems",draft:!1,unlisted:!1,editUrl:"https://github.com/evcc-io/docs/tree/main/docs/reference/configuration/hems.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"vehicles",permalink:"/docs/reference/configuration/vehicles"},next:{title:"network",permalink:"/docs/reference/configuration/uri"}},l={},o=[{value:"Erforderliche Parameter",id:"erforderliche-parameter",level:2},{value:"<code>type</code>",id:"type",level:3},{value:"Optionale Parameter",id:"optionale-parameter",level:2},{value:"<code>allowcontrol</code>",id:"allowcontrol",level:3},{value:"Optionale SMA Parameter",id:"optionale-sma-parameter",level:2},{value:"<code>vendorid</code>",id:"vendorid",level:3},{value:"<code>deviceid</code>",id:"deviceid",level:3},{value:"Bisherige DeviceID herausfinden",id:"bisherige-deviceid-herausfinden",level:4},{value:"Unterst\xfctzte HEMS",id:"unterst\xfctzte-hems",level:2},{value:"<code>sma</code>",id:"sma",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"hems",children:(0,r.jsx)(n.code,{children:"hems"})}),"\n",(0,r.jsx)(n.p,{children:"evcc kann in bestehende Home Energy Management Systeme (HEMS) integriert werden. Momentan wird der SMA Sunny Home Manager 2.0 (SHM) unterst\xfctzt!"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  ...\n"})}),"\n",(0,r.jsx)(n.p,{children:"Im folgenden werden nun alle m\xf6glichen Parameter erkl\xe4rt."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erforderliche-parameter",children:"Erforderliche Parameter"}),"\n",(0,r.jsx)(n.h3,{id:"type",children:(0,r.jsx)(n.code,{children:"type"})}),"\n",(0,r.jsx)(n.p,{children:"Definiert das HEMS System."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"M\xf6gliche Werte"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sma"}),": F\xfcr den SMA Sunny Home Manager 2.0. Siehe ",(0,r.jsx)(n.a,{href:"#sma",children:(0,r.jsx)(n.code,{children:"sma"})})," Definition"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"type: sma\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"optionale-parameter",children:"Optionale Parameter"}),"\n",(0,r.jsx)(n.h3,{id:"allowcontrol",children:(0,r.jsx)(n.code,{children:"allowcontrol"})}),"\n",(0,r.jsx)(n.p,{children:"Definiert ob das definierte HEMS die Ladesteuerung von evcc \xfcbernehmen soll."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"M\xf6gliche Werte"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"true"}),": Hiermit kann das Verh\xe4ltnis von Netzstrom zu PV Leistung f\xfcr den Modus ",(0,r.jsx)(n.strong,{children:"Min+PV"}),' im Sunny Portal \xfcber den Slider "Optional energy demand" eingestellt werden. Falls die notwendige PV Leistung nicht verf\xfcgbar ist, wird das Laden wie im Modus ',(0,r.jsx)(n.strong,{children:"PV"})," unterbrochen. Den Slider also ganz nach links zu schieben, bewirkt dass der Modus ",(0,r.jsx)(n.strong,{children:"Min+PV"})," wie beschrieben funktioniert. Wenn der Slider ganz nach rechts geschoben wird, verh\xe4llt sich der Modus ",(0,r.jsx)(n.strong,{children:"Min+PV"})," wie der ",(0,r.jsx)(n.strong,{children:"PV"})," Modus."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"false"}),": Der SHM kann die Lademodi nicht beeinflussen, diese werden nur von evcc gesteuert."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  allowcontrol: false\n  ...\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"optionale-sma-parameter",children:"Optionale SMA Parameter"}),"\n",(0,r.jsx)(n.p,{children:"evcc meldet jeden Ladepunkt an den SHM als eigenst\xe4ndiges Device. Die Device ID wird dabei von evcc generiert."}),"\n",(0,r.jsx)(n.p,{children:"Die Device ID ist ein HEX-String und setzt sich wie folgt zusammen"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"F-AAAAAAAA-BBBBBBBBBBBB-00\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"F: Vendor ID Type, fest definiert"}),"\n",(0,r.jsxs)(n.li,{children:["AAAAAAAA: Siehe ",(0,r.jsx)(n.code,{children:"vendorid"})]}),"\n",(0,r.jsxs)(n.li,{children:["BBBBBBBBBBBB: Siehe ",(0,r.jsx)(n.code,{children:"deviceid"})]}),"\n",(0,r.jsx)(n.li,{children:"00: Sub Device ID, fest definiert"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"vendorid",children:(0,r.jsx)(n.code,{children:"vendorid"})}),"\n",(0,r.jsx)(n.p,{children:"Definiert die VendorID die f\xfcr die Erstellung der Device ID verwendet wird. Wenn in der Konfiguration keine Vendor ID angegeben wird, wird eine fest definierte ID verwendet."}),"\n",(0,r.jsx)(n.p,{children:"HEX-String, L\xe4nge 8 Zeichen"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  vendorid: AAAAAAAA\n  ...\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"deviceid",children:(0,r.jsx)(n.code,{children:"deviceid"})}),"\n",(0,r.jsx)(n.p,{children:"Definiert die Ger\xe4te ID, die f\xfcr die Erstellung der Device ID verwendet wird. Wenn keine Ger\xe4te ID angegeben wird, generiert evcc eine zuf\xe4llige Ger\xe4te ID in Abh\xe4ngigkeit auf den aktuellen Computer."}),"\n",(0,r.jsx)(n.p,{children:"HEX-String, L\xe4nge: 12 Zeichen"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  deviceid: BBBBBBBBBBBB\n  ...\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Docker Container",type:"info",children:(0,r.jsxs)(n.p,{children:["Wenn evcc als Docker Container ausgef\xfchrt wird, muss hierf\xfcr ",(0,r.jsx)(n.code,{children:"machine-id"})," gemounted werden. Siehe auch ",(0,r.jsx)(n.a,{href:"../../installation/docker",children:"Docker Konfiguration"})]})}),"\n",(0,r.jsx)(n.h4,{id:"bisherige-deviceid-herausfinden",children:"Bisherige DeviceID herausfinden"}),"\n",(0,r.jsx)(n.p,{children:"Wenn evcc auf einen anderen Computer umgezogen wird, \xe4ndert sich auch die zuf\xe4llig erzeugte Ger\xe4te ID. Der SHM wird evcc in diesem Fall als neues Ger\xe4t erkannt und die bisherigen Ger\xe4te werden im SMA Portal nicht erkannt."}),"\n",(0,r.jsx)(n.p,{children:"Um dies zu verhindern, sollte die Ger\xe4te ID vom bisherigen System \xfcbernommen werden:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\xd6ffne in einem Browser die Adresse ",(0,r.jsx)(n.code,{children:"http://IP-ADRESSE-BISHERIGER-EVCC-HOST:7070/semp"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Es wird ein Text im XML Format angezeigt. Der Text beginnt in dieser Form:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<Device2EM xmlns="http://www.sma.de/communication/schema/SEMP/v1">\n  <DeviceInfo>\n    <Identification>\n      <DeviceId>F-28081973-BBBBBBBBBBBB-00</DeviceId>\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Die Zeichenkette an der Stelle von ",(0,r.jsx)(n.code,{children:"BBBBBBBBBBBB"})," entspricht der DeviceID"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Diese Zeichenkette muss nun in der Konfiguration f\xfcr ",(0,r.jsx)(n.code,{children:"deviceid"})," im neuen System \xfcbernommen werden"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"unterst\xfctzte-hems",children:"Unterst\xfctzte HEMS"}),"\n",(0,r.jsx)(n.h3,{id:"sma",children:(0,r.jsx)(n.code,{children:"sma"})}),"\n",(0,r.jsx)(n.p,{children:"Bietet Unterst\xfctzung f\xfcr den SMA Sunny Home Manager 2.0 (SHM)."}),"\n",(0,r.jsxs)(n.p,{children:["Durch die Integration k\xf6nnen die ",(0,r.jsx)(n.a,{href:"loadpoints",children:"Ladepunkte"})," dem SHM hinzugef\xfcgt werden und somit z.B. f\xfcr dessen Steuerung ber\xfccksichtigt werden."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"hems:\n  type: sma\n  allowcontrol: false # set true to allow SHM controlling charger in PV modes\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>t});var r=i(7294);const s={},d=r.createContext(s);function t(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);