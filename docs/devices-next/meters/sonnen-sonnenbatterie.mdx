---
title: Sonnen sonnenBatterie
custom_edit_url: https://github.com/evcc-io/evcc/blob/master/templates/definition/meter/sonnenbatterie.yaml
hide_table_of_contents: true
---

import DeviceConfig from '@site/src/components/DeviceConfig';
import DeviceFeatures from '@site/src/components/DeviceFeatures';
import SponsorshipRequired from '/docs/_sponsorship_required.mdx';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Sonnen sonnenBatterie

<DeviceFeatures features="battery-control" />

For active battery control, the "JSON Write API" must be activated via the sonnenBatterie web interface (under Software-Integration) and the API token generated there must be entered in the battery configuration under `token`.
The two operating modes supported for the sonnenBatterie are “self-consumption” (default) and “time-of-use”. The mode can be adapted to the configuration of the sonnenBatterie via the 'defaultmode' parameter.
The power for grid charging can be adapted to the inverter power of the sonnenBatterie via the `maxchargepower` parameter.


<Tabs>
<TabItem value="grid" label="Grid" default>

<DeviceConfig code={`meters:
    - name: my_grid
      type: template
      template: sonnenbatterie
      usage: grid
      host: 192.0.2.2 # IP address or hostname
      port: 8080 # Port, optional`}  />

</TabItem>
<TabItem value="pv" label="PV">

<DeviceConfig code={`meters:
    - name: my_pv
      type: template
      template: sonnenbatterie
      usage: pv
      host: 192.0.2.2 # IP address or hostname
      port: 8080 # Port, optional`}  />

</TabItem>
<TabItem value="battery" label="Battery">

<DeviceConfig code={`meters:
    - name: my_battery
      type: template
      template: sonnenbatterie
      usage: battery
      host: 192.0.2.2 # IP address or hostname
      port: 8080 # Port, optional
      token: # API Token (required for active battery control) (optional)`} advanced={`meters:
    - name: my_battery
      type: template
      template: sonnenbatterie
      usage: battery
      host: 192.0.2.2 # IP address or hostname
      port: 8080 # Port, optional
      token: # API Token (required for active battery control) (optional)
      capacity: 50 # Battery capacity (kWh), optional
      maxchargepower: 3300 # Maximum charge power (W), For forced charging of the battery. (optional)
      defaultmode: self-consumption # Default mode for battery control, Inverter falls back to this mode after charging the battery or after stopping discharge. [self-consumption, time-of-use]`} />

</TabItem>
</Tabs>

## Template Parameter `sonnenbatterie`

| Name | Explanation | Value | Optional |
|-----------|-------------|-------|----------|
| IP address or hostname<br/>`host` |  | Beispiel: `192.0.2.2` | yes |
| Port<br/>`port` |  | Standard: `8080` | no |
| `token` | API Token (required for active battery control) |  | no |
| Battery capacity<br/>`capacity` |  | Beispiel: `50`<br/>Einheit: kWh | no |
| Maximum charge power<br/>`maxchargepower` | For forced charging of the battery. | Standard: `3300`<br/>Einheit: W | no |
| Default mode for battery control<br/>`defaultmode` | Inverter falls back to this mode after charging the battery or after stopping discharge. | Standard: `self-consumption`<br/>Auswahl: `self-consumption`, `time-of-use` | yes |

