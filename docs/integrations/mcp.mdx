---
sidebar_position: 4
hide_table_of_contents: true
---

import Video from "@site/src/components/Video";
import mcpVideo from "./screenshots/mcp-integration.mp4";
import mcpPoster from "./screenshots/mcp-integration.webp";

# MCP-Server

:::warning Experimentell
Der MCP-Server ist experimentell und kann sich jederzeit ändern.
:::

Mit dem [Model Context Protocol](https://de.wikipedia.org/wiki/Model_Context_Protocol) (kurz MCP) ist es möglich LLMs wie Claude, Gemini und ChatGPT strukturierten Zugriff auf externe Systeme, wie bspw. evcc, zu geben.

Starte evcc mit aktiviertem MCP-Server:

```bash
evcc --mcp
```

## Verwendung mit Claude Code

Dieses Beispiel zeigt, wie du evcc mit Claude Code via CLI nutzen kannst.
MPCs via HTTP sind aktuell nur mit der [Bezahlversion](https://www.anthropic.com/pricing) verfügbar.
Natürlich kannst du auch andere LLMs wie Gemini oder ChatGPT nutzen.

1. Installiere Claude Code anhand der [offiziellen Anleitung](https://docs.anthropic.com/en/docs/claude-code/overview).

2. Erstelle einen leeren Ordner für deinen Test und wechsle in diesen Ordner:

    ```bash
    mkdir evcc-mcp-test
    cd evcc-mcp-test
    ```

3. Füge evcc als MCP-Server zu deinem Workspace hinzu:

    ```bash
    claude mcp add --transport http evcc http://localhost:7070/mcp
    ```

4. Stelle sicher, dass deine evcc-Instanz mit dem MCP-Server läuft:

    ```bash
    evcc --mcp
    ```

5. Starte Claude Code und gib eine Anfrage ein.

    ```bash
    claude

    ╭──────────────────────────────────────────────────────────────────────────────────────────╮
    │ > Bekomme ich mein Auto heute noch mit Sonnenenergie gefüllt?                            │
    ╰──────────────────────────────────────────────────────────────────────────────────────────╯
    ```

6. Standardmäßig wirst du gefragt, bevor das System eine Anfrage an evcc stellt. Du musst diese Anfragen bestätigen.

Jetzt kannst du Claude Code beim Arbeiten zusehen und solltest abschließend eine ordentliche Antwort auf deine Frage erhalten.
Zumindest, wenn du eine [PV-Vorhersage](/docs/tariffs#pv-vorhersage) konfiguriert hast.

## Beispiel: Ladeplan erstellen

Hier siehst du eine Beispielanfrage bei der Claude einen Ladeplan für das weiße Model 3 erstellt.
Es wird das Sonnet 4 Modell verwendet.

<Video src={mcpVideo} poster={mcpPoster} />

## Demo-Server

Auf dem Demo-Server unter [demo.evcc.io](https://demo.evcc.io) ist MCP aktiviert.
Du kannst also auch direkt damit testen:

```bash
claude mcp add --transport http evcc-demo https://demo.evcc.io/mcp
```

Da diese Instanz von vielen Personen genutzt wird können die Resultate allerdings unzuverlässig sein.